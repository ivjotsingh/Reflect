<!-- CBT Worksheets Modal -->
<div id="cbt-worksheets-modal" class="modal-overlay">
    <div class="cbt-modal">
        <div class="modal-header">
            <h2>CBT Worksheets</h2>
            <button id="close-cbt-modal" class="close-modal-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <div class="modal-content">
            <!-- Worksheet Selection View -->
            <div id="worksheet-selection" class="worksheet-selection">
                <div class="description">
                    <p>Select a cognitive behavioral therapy worksheet to help identify, challenge, and modify unhelpful thoughts and behaviors. These evidence-based tools can help improve mood and develop healthier thinking patterns.</p>
                </div>

                <h3>Choose Your Worksheet</h3>
                <div class="worksheet-cards">
                    <!-- Thought Record Worksheet -->
                    <div class="worksheet-card" data-worksheet="thoughtRecord">
                        <div class="worksheet-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"
                                fill="none" stroke="#3498db" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                        </div>
                        <h3>Thought Record</h3>
                        <p>Track and challenge negative thoughts</p>
                    </div>
                    
                    <!-- Cognitive Distortions Worksheet -->
                    <div class="worksheet-card" data-worksheet="cognitiveDistortions">
                        <div class="worksheet-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"
                                fill="none" stroke="#3498db" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                        </div>
                        <h3>Cognitive Distortions</h3>
                        <p>Identify and challenge thinking errors</p>
                    </div>

                    <!-- Behavioral Activation Worksheet -->
                    <div class="worksheet-card" data-worksheet="behavioralActivation">
                        <div class="worksheet-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"
                                fill="none" stroke="#3498db" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                        </div>
                        <h3>Behavioral Activation</h3>
                        <p>Plan positive activities to improve mood</p>
                    </div>
                </div>
            </div>

            <!-- Thought Record Worksheet Form -->
            <div id="thought-record-worksheet" class="worksheet-form thought-record-form" style="display: none;">
                <div class="form-header">
                    <button class="back-to-selection cbt-control-btn close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Back
                    </button>
                    <h3>Thought Record</h3>
                </div>
                <div class="worksheet-description">
                    <p>Use this worksheet to identify and challenge negative thoughts. By examining the evidence for and against your thoughts, you can develop more balanced perspectives.</p>
                </div>
                <form class="thought-record-form">
                    <div class="form-group">
                        <label for="situation">Situation</label>
                        <textarea id="situation" class="form-input" rows="2" placeholder="Describe the situation that triggered your negative thoughts"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="emotions">Emotions</label>
                        <textarea id="emotions" class="form-input" rows="2" placeholder="What emotions did you feel? (e.g., anxiety, sadness, anger)"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="emotion-intensity">Emotion Intensity (0-100%)</label>
                        <div class="emotion-intensity-container">
                            <input type="range" id="emotion-intensity" min="0" max="100" value="50">
                            <span class="intensity-value">50%</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="automatic-thoughts">Automatic Thoughts</label>
                        <textarea id="automatic-thoughts" class="form-input" rows="3" placeholder="What thoughts went through your mind?"></textarea>
                    </div>
                    <div class="thought-evidence">
                        <div class="form-group">
                            <label for="evidence-for">Evidence Supporting Thought</label>
                            <textarea id="evidence-for" class="form-input" rows="3" placeholder="What facts support this thought?"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="evidence-against">Evidence Against Thought</label>
                            <textarea id="evidence-against" class="form-input" rows="3" placeholder="What facts contradict this thought?"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="balanced-thought">Balanced Thought</label>
                        <textarea id="balanced-thought" class="form-input" rows="3" placeholder="What's a more balanced or helpful way to think about the situation?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="new-emotion">New Emotion</label>
                        <textarea id="new-emotion" class="form-input" rows="2" placeholder="How do you feel now?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="new-emotion-intensity">New Emotion Intensity (0-100%)</label>
                        <div class="emotion-intensity-container">
                            <input type="range" id="new-emotion-intensity" min="0" max="100" value="30">
                            <span class="intensity-value">30%</span>
                        </div>
                    </div>
                    <div class="form-controls">
                        <button type="button" id="reset-thought-record" class="cbt-control-btn close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 2v6h6"></path>
                                <path d="M21 12A9 9 0 0 0 6 5.3L3 8"></path>
                                <path d="M21 22v-6h-6"></path>
                                <path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"></path>
                            </svg>
                            Reset
                        </button>
                        <button type="button" id="save-thought-record" class="continue-btn">
                            Save
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Cognitive Distortions Worksheet Form -->
            <div id="cognitive-distortions-worksheet" class="worksheet-form cognitive-distortions-form" style="display: none;">
                <div class="form-header">
                    <button class="back-to-selection cbt-control-btn close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Back
                    </button>
                    <h3>Cognitive Distortions</h3>
                </div>
                <div class="worksheet-description">
                    <p>Use this worksheet to identify and challenge cognitive distortions (thinking errors) that contribute to negative emotions and behaviors.</p>
                </div>
                <form class="cognitive-distortions-form">
                    <div class="form-group">
                        <label for="distortion-type">Type of Cognitive Distortion</label>
                        <select id="distortion-type" class="form-input distortion-type-select">
                            <option value="">Select a distortion type</option>
                            <option value="All-or-Nothing Thinking">All-or-Nothing Thinking</option>
                            <option value="Overgeneralization">Overgeneralization</option>
                            <option value="Mental Filter">Mental Filter</option>
                            <option value="Disqualifying the Positive">Disqualifying the Positive</option>
                            <option value="Jumping to Conclusions">Jumping to Conclusions</option>
                            <option value="Magnification or Minimization">Magnification or Minimization</option>
                            <option value="Emotional Reasoning">Emotional Reasoning</option>
                            <option value="Should Statements">Should Statements</option>
                            <option value="Labeling">Labeling</option>
                            <option value="Personalization">Personalization</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="distortion-description">Description of Distorted Thought</label>
                        <textarea id="distortion-description" class="form-input" rows="3" placeholder="Describe the distorted thought in detail"></textarea>
                    </div>
                    <div class="thought-evidence">
                        <div class="form-group">
                            <label for="evidence-for-distortion">Evidence Supporting Thought</label>
                            <textarea id="evidence-for-distortion" class="form-input" rows="3" placeholder="What evidence supports this thought?"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="evidence-against-distortion">Evidence Against Thought</label>
                            <textarea id="evidence-against-distortion" class="form-input" rows="3" placeholder="What evidence contradicts this thought?"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="balanced-thought">Alternative Balanced Thought</label>
                        <textarea id="balanced-thought" class="form-input" rows="3" placeholder="What's a more realistic or balanced way to view the situation?"></textarea>
                    </div>
                    <div class="form-controls">
                        <button type="button" id="reset-cognitive-distortions" class="cbt-control-btn close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 2v6h6"></path>
                                <path d="M21 12A9 9 0 0 0 6 5.3L3 8"></path>
                                <path d="M21 22v-6h-6"></path>
                                <path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"></path>
                            </svg>
                            Reset
                        </button>
                        <button type="button" id="save-cognitive-distortions" class="continue-btn">
                            Save
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Behavioral Activation Worksheet Form -->
            <div id="behavioral-activation-worksheet" class="worksheet-form behavioral-activation-form" style="display: none;">
                <div class="form-header">
                    <button class="back-to-selection cbt-control-btn close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Back
                    </button>
                    <h3>Behavioral Activation</h3>
                </div>
                <div class="worksheet-description">
                    <p>Use this worksheet to plan positive activities that can help improve your mood and increase engagement with your environment.</p>
                </div>
                <form class="behavioral-activation-form">
                    <div class="form-group">
                        <label for="activity-type">Type of Activity</label>
                        <select id="activity-type" class="form-input">
                            <option value="">Select a type</option>
                            <option value="Physical">Physical (exercise, walking)</option>
                            <option value="Social">Social (meeting friends, calling family)</option>
                            <option value="Pleasure">Pleasure (hobbies, entertainment)</option>
                            <option value="Mastery">Mastery (learning, accomplishing tasks)</option>
                            <option value="Self-care">Self-care (hygiene, relaxation)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="activity-description">Activity Description</label>
                        <textarea id="activity-description" class="form-input" rows="3" placeholder="Describe the activity you plan to engage in"></textarea>
                    </div>
                    <div class="activity-info">
                        <div class="form-group">
                            <label for="activity-duration">Duration</label>
                            <input type="text" id="activity-duration" class="form-input" placeholder="How long? (e.g., 30 minutes, 1 hour)">
                        </div>
                        <div class="form-group">
                            <label for="activity-frequency">Frequency</label>
                            <input type="text" id="activity-frequency" class="form-input" placeholder="How often? (e.g., daily, 3x per week)">
                        </div>
                    </div>
                    <div class="form-controls">
                        <button type="button" id="reset-behavioral-activation" class="cbt-control-btn close">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 2v6h6"></path>
                                <path d="M21 12A9 9 0 0 0 6 5.3L3 8"></path>
                                <path d="M21 22v-6h-6"></path>
                                <path d="M3 12a9 9 0 0 0 15 6.7l3-2.7"></path>
                            </svg>
                            Reset
                        </button>
                        <button type="button" id="save-behavioral-activation" class="continue-btn">
                            Save
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Worksheet Saved Confirmation -->
            <div id="worksheet-saved" class="worksheet-saved" style="display: none;">
                <div class="success-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none"
                        stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
                <h3>Worksheet Saved Successfully</h3>
                <p>Your CBT worksheet has been saved. You can continue working on another worksheet or return to your chat.</p>
                <div class="saved-controls">
                    <button id="continue-worksheets" class="continue-btn">
                        Continue with Another Worksheet
                    </button>
                    <button id="close-saved-message" class="cbt-control-btn close">
                        Return to Chat
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
